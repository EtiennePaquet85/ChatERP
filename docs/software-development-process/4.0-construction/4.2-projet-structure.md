# 🏗️ ChatERP — Structure du projet

---

## 1. 🎯 Objectif du document

Ce document décrit l’architecture technique et l’organisation modulaire du projet **ChatERP**.  
Il vise à garantir une compréhension claire et synthétique de la structure du code, afin de faciliter la navigation, la contribution, la maintenance et l’évolution du projet.  
Il s’inscrit dans le chapitre *Software Construction* du SWEBOK V4.0 et soutient les bonnes pratiques professionnelles du développement logiciel.

---

## 2. 🧱 Architecture modulaire et responsabilités

Le projet adopte une architecture en couches fortement découplées, inspirée du modèle **Ports & Adapters (Hexagonal Architecture)**.  
Chaque couche est autonome, faiblement couplée, testable isolément, et les dépendances ne remontent jamais vers les couches supérieures.

| Couche        | Dossier racine                          | Rôle principal                                                    |
|---------------|-----------------------------------------|-------------------------------------------------------------------|
| Documentation | `docs/`                                 | Support vivant à la conception, aux processus et à la traçabilité |
| Scripts       | `scripts/`                              | Automatisation des tâches de tests, build et déploiement          |
| Docker        | `docker/`                               | Conteneurisation des services et orchestration multi-couches      |
| Frontend      | `systems/frontend/ChatERP.Web/`         | Interface utilisateur (gestion locale, appels HTTP vers Backend)  |
| Backend       | `systems/backend/ChatERP.Server/`       | Logique métier (UseCases, services, contrôleurs, clients HTTP)    |
| Database      | `systems/database/ChatERP.Persistence/` | API REST CRUD, validation stricte, gestion de la persistance      |
| Tests         | `tests/ChatERP.Tests/`                  | Couverture d’intégration alignée sur les couches                  |

### Séparation des responsabilités

- **Documentation** : Traçabilité des décisions et conformité au processus logiciel.  
- **Scripts** : Automatisation du processus de test, de génération de rapports et de déploiement.  
- **Docker** : Mise en conteneur des composants, isolation des environnements, configuration multi-services.  
- **Frontend** : Interface moderne typée, gestion locale de la logique métier, appels adaptateurs HTTP fiables.  
- **Backend** : Point d’entrée HTTP, logique métier centralisée, communication via HttpClient et JSON.  
- **Database** : API REST CRUD via FastAPI, validation stricte avec Pydantic, gestion de SQLite.  
- **Tests** : Organisation par type (unitaires, intégration) et par couche.

---

## 3. 🌲 Détail de l’arborescence principale (version simplifiée)

| Chemin                                                           | Description                                                  |
|------------------------------------------------------------------|-------------------------------------------------------------|
| `docker/chaterp-compose/`                                        | Infrastructure pour dev, tests et CI via Docker Compose      |
| `docker/docker-compose.yml`                                      | Configuration d’orchestration des conteneurs                 |
| `docs/`                                                          | Documentation générale du projet                             |
| `docs/software-development-process/`                             | Processus et méthodes (SWEBOK, Agile, etc.)                  |
| `docs/software-diagrams/`                                        | Diagrammes UML et autres diagrammes techniques               |
| `docs/software-structure/`                                       | Documentation de la structure des dossiers et fichiers       |
| `docs/software-tools/`                                           | Liste des outils utilisés dans le projet                      |
| `scripts/`                                                      | Scripts d’automatisation pour structure et tests             |
| `systems/backend/chaterp-server/`                               | Système Backend (.NET), configurations et tests                 |
| `systems/backend/chaterp-server/src/`                           | Code source Backend : contrôleurs, services métier, clients HTTP, DTOs |
| `systems/backend/chaterp-server/src/Clients/`                   | Clients HTTP pour appels API externes                         |
| `systems/backend/chaterp-server/src/Controllers/`               | Contrôleurs ASP.NET Core                                     |
| `systems/backend/chaterp-server/src/DTOs/`                      | Objets de transfert de données (DTO)                         |
| `systems/backend/chaterp-server/src/Services/`                  | Services métier (logique métier)                             |
| `systems/backend/chaterp-server-tests/`                         | Module des tests unitaires pour le Backend                    |
| `systems/backend/chaterp-server-tests/tests/`                   | Tests unitaires organisés par cas d’utilisation              |
| `systems/backend/chaterp-server-tests/scripts/`                 | Scripts PowerShell pour gestion et rapports de couverture    |
| `systems/backend/chaterp-server-tests/tools/`                   | Outils CLI internes pour nettoyage et génération de rapports |
| `systems/backend/chaterp-server-tests/coverage-report/`         | Rapports détaillés de couverture des tests Backend           |
| `systems/database/chaterp-persistence/`                         | Système Database (FastAPI, SQLite, Python), configurations et tests |
| `systems/database/chaterp-persistence/data/`                    | Base SQLite et fichiers de données associés                  |
| `systems/database/chaterp-persistence/scripts/`                 | Scripts Python pour gestion et maintenance de la base        |
| `systems/database/chaterp-persistence/src/`                     | Code source Database : managers, repositories, routes        |
| `systems/database/chaterp-persistence/src/managers/`            | Managers de logique métier                                   |
| `systems/database/chaterp-persistence/src/repositories/`        | Accès aux données, abstraction de la base SQLite             |
| `systems/database/chaterp-persistence/src/routers/`             | Routes FastAPI (endpoints)                                   |
| `systems/database/chaterp-persistence/src/schemas/`             | Schémas Pydantic (modèles de données)                        |
| `systems/database/chaterp-persistence-tests/`                   | Tests unitaires pour la Database                             |
| `systems/database/chaterp-persistence-tests/tests/`             | Tests unitaires par cas d’utilisation                         |
| `systems/database/chaterp-persistence-tests/coverage-report/`   | Rapports détaillés de couverture des tests Database           |
| `systems/frontend/chaterp-web/`                                 | Système Frontend (React + TypeScript), configuration et tests |
| `systems/frontend/chaterp-web/public/`                          | Ressources publiques (polices, images, SVG, etc.)             |
| `systems/frontend/chaterp-web/scripts/`                         | Scripts utilitaires Frontend (ex : nettoyage CSS)             |
| `systems/frontend/chaterp-web/src/`                             | Code source Frontend : composants, pages, styles, utilitaires |
| `systems/frontend/chaterp-web/src/adapters/`                    | Adaptateurs pour la communication avec l’API                 |
| `systems/frontend/chaterp-web/src/assets/`                      | Ressources statiques (images, logos)                          |
| `systems/frontend/chaterp-web/src/components/`                  | Composants React                                             |
| `systems/frontend/chaterp-web/src/constants/`                   | Constantes utilisées dans l’application                       |
| `systems/frontend/chaterp-web/src/handlers/`                    | Gestionnaires de logique métier côté client                   |
| `systems/frontend/chaterp-web/src/pages/`                       | Pages React                                                  |
| `systems/frontend/chaterp-web/src/styles/`                      | Fichiers CSS pour le style                                    |
| `systems/frontend/chaterp-web/src/types/`                       | Définitions des types TypeScript                              |
| `systems/frontend/chaterp-web/src/utils/`                       | Fonctions utilitaires diverses                                |
| `systems/frontend/chaterp-web/chaterp-web-tests/`               | Tests unitaires et de composants Frontend                     |
| `systems/frontend/chaterp-web/chaterp-web-tests/tests/`         | Suites de tests pour adaptateurs, composants, handlers, pages |
| `systems/frontend/chaterp-web/chaterp-web-tests/coverage-report/`| Rapports détaillés de couverture des tests Frontend           |
| `tests/chaterp-tests/`                                          | Projet de tests d’intégration et unitaires unifiés           |
| `tests/chaterp-tests/coverage-reports/`                         | Rapports de couverture des tests d’intégration et unitaires  |
| `tests/chaterp-tests/integration-tests/`                        | Tests d’intégration et bout-en-bout entre systèmes           |
| `tests/chaterp-tests/unit-tests/`                               | Tests unitaires spécifiques                                  |
| `.gitignore`                                                    | Fichier pour exclusions dans Git                              |
| `ChatERP.sln`                                                  | Solution Visual Studio pour tout le projet                    |
| `CODEOWNERS`                                                   | Désignation des responsables du code                         |
| `LICENSE`                                                      | Licence open source                                          |
| `README.md`                                                    | Documentation principale du projet                           |
| `render.yaml`                                                  | Fichier de configuration pour le déploiement en production   |

---

## 4. 🧩 Principes de structuration

| Principe clé              | Application dans ChatERP                                              |
|---------------------------|-----------------------------------------------------------------------|
| Cohésion forte            | Chaque dossier a un rôle métier ou technique clairement défini        |
| Couplage faible           | Interfaces et DTOs isolent les dépendances entre les couches          |
| Injection de dépendances  | Toutes les dépendances techniques sont injectées via services         |
| Aucune dépendance croisée | Le domaine métier ne dépend ni de la UI ni de la base de données      |
| Structure miroir          | L’arborescence des tests reflète celle du code source                 |
| Évolutivité naturelle     | Les couches peuvent être externalisées (microservices) ou remplacées  |
| Documentation vivante     | Miroir actif entre les dossiers `docs/` et les artefacts du code      |

---

## 5. 🧬 Couplage, évolutivité et qualité logicielle

La séparation stricte des couches favorise :

- ✅ **Lisibilité** : séparation explicite des responsabilités et navigation intuitive  
- ✅ **Testabilité** : composants isolables, facilement simulables et testables unitairement  
- ✅ **Extensibilité** : ajout fluide de nouvelles fonctionnalités ou modules  
- ✅ **Maintenabilité** : dette technique limitée, refactorisation facilitée  
- ✅ **Traçabilité** : lien clair entre besoins métier, documentation et code source  

Elle permet aussi :

- L’évolutivité (ex : remplacement du frontend ou de la base sans impact sur le domaine)  
- Les tests automatisés (mocking facilité, couverture métier isolée)  
- L’industrialisation (intégration CI/CD, builds multi-environnement)  
- Le respect des principes SOLID à travers toute la base de code  

---

## 6. 🧪 Intégration avec le processus de développement

Cette structure est alignée avec :

- 📁 L’arborescence documentaire (`docs/software-structure/project-structure-files.md`)
- 🧱 Les stratégies de construction (`docs/software-development-process/4.0-construction/4.1-construction.md`)
- 🔄 Les pratiques de développement (`docs/software-development-process/4.0-construction/4.3-coding-practices.md`)

---

## 7. 🔚 Conclusion

La structure du projet **ChatERP** constitue un socle stable, rigoureux et extensible.  
Elle garantit un alignement fort avec les bonnes pratiques d’ingénierie logicielle issues du **SWEBOK**, et permet à tout développeur ou contributeur de monter rapidement en compétence sur le projet.  
Elle soutient une organisation modulaire, testable, documentée, et adaptée aux exigences d’un ERP moderne et maintenable.
